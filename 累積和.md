# 累積和（追記するか悩み中）

Created: Apr 11, 2020 12:05 PM
Property: ape iria
Tags: Algorithm

**累積和とは**

前処理を用いることで、配列上の区間の総和をO(n)で求めることができます。

全探索を行うとO(n²)となるので、現実的ではありません。

2次元に拡張することもできますが、今回はそこまでやりません。

長さNの配列上の区間[p,q)の総和を求めてくださいというクエリがあったとします。

最初に長さNの配列Aを作ります。

次に、累積和を保存する長さN+１の配列Bを作ります。(B_0=0とするため＋１)

そしてこの配列Bに、B[i+1]=B[i]+A[i]のように要素を代入していきます。

    for(int i=0;i<N;i++){
    		B[i+1]=B[i]+A[i];
    }

i=1から考えると以下のようになります。

    for(int i=1;i<N;i++){	
    		B[i]=B[i-1]+A[i];
    }

計算量がO(n)であることは明らかです。

これが累積和の配列Bを作る前処理です。

そして、(求めたい領域の右端)-(左端より一つ左側)をします。

つまり

    int ans=0;
    ans=B[p]-B[q-1];

こういうことです。

このクエリの計算量はO(1)ですよね。

もし仮にこの処理をM回ループさせても全体の計算量はO(n+M)で済みます。(n>M)

以上より全体の計算量はO(n)となります。